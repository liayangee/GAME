<!DOCTYPE html>

<html lang="zh-TW">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Êï∏Â≠óÊà∞Â£´ - ‰πòÊ≥ïÂ§ßÊà∞</title>

    <style>

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

        }

       

        body {

            font-family: 'Arial', sans-serif;

            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

            min-height: 100vh;

            color: white;

        }

       

        .container {

            max-width: 1200px;

            margin: 0 auto;

            padding: 20px;

        }

       

        .header {

            text-align: center;

            margin-bottom: 30px;

        }

       

        .title {

            font-size: 2.5rem;

            font-weight: bold;

            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);

            margin-bottom: 10px;

        }

       

        .subtitle {

            font-size: 1.2rem;

            opacity: 0.9;

        }

       

        .game-controls {

            display: flex;

            justify-content: center;

            gap: 20px;

            margin-bottom: 30px;

            flex-wrap: wrap;

        }

       

        .difficulty-btn {

            padding: 12px 24px;

            border: none;

            border-radius: 25px;

            background: rgba(255,255,255,0.2);

            color: white;

            font-size: 1rem;

            cursor: pointer;

            transition: all 0.3s ease;

            backdrop-filter: blur(10px);

        }

       

        .difficulty-btn:hover {

            background: rgba(255,255,255,0.3);

            transform: translateY(-2px);

        }

       

        .difficulty-btn.active {

            background: #ff6b6b;

            box-shadow: 0 4px 15px rgba(255,107,107,0.4);

        }

       

        .battle-arena {

            background: rgba(255,255,255,0.1);

            border-radius: 20px;

            padding: 30px;

            margin-bottom: 30px;

            backdrop-filter: blur(10px);

            border: 1px solid rgba(255,255,255,0.2);

        }

       

        .problem-display {

            text-align: center;

            font-size: 2rem;

            margin-bottom: 30px;

            font-weight: bold;

        }

       

        .warriors-container {

            display: flex;

            flex-direction: column;

            align-items: center;

            margin-bottom: 30px;

            gap: 20px;

        }

       

        .warrior-group {

            display: flex;

            flex-direction: column;

            align-items: center;

            gap: 10px;

            width: 100%;

        }

       

        .warrior-row {

            display: flex;

            justify-content: center;

            gap: 15px;

            flex-wrap: wrap;

        }

       

        .warrior {

            width: 80px;

            height: 80px;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            font-size: 1.5rem;

            font-weight: bold;

            color: white;

            cursor: pointer;

            transition: all 0.3s ease;

            position: relative;

            box-shadow: 0 4px 15px rgba(0,0,0,0.2);

        }

       

        .warrior.hundreds { background: linear-gradient(45deg, #ff6b6b, #ee5a52); }

        .warrior.tens { background: linear-gradient(45deg, #4ecdc4, #44a08d); }

        .warrior.ones { background: linear-gradient(45deg, #45b7d1, #96c93d); }

       

        .warrior:hover {

            transform: scale(1.1);

            box-shadow: 0 6px 20px rgba(0,0,0,0.3);

        }

       

        .warrior.selected {

            animation: pulse 1s infinite;

            border: 3px solid #ffd700;

        }

       

        @keyframes pulse {

            0% { transform: scale(1); }

            50% { transform: scale(1.05); }

            100% { transform: scale(1); }

        }

       

        .vs-symbol {

            font-size: 3rem;

            font-weight: bold;

            color: #ffd700;

            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);

        }

       

        .battle-steps {

            background: rgba(255,255,255,0.1);

            border-radius: 15px;

            padding: 20px;

            margin-bottom: 20px;

        }

       

        .step {

            display: flex;

            justify-content: space-between;

            align-items: center;

            padding: 10px;

            margin: 5px 0;

            border-radius: 10px;

            background: rgba(255,255,255,0.05);

            opacity: 0.5;

            transition: all 0.3s ease;

        }

       

        .step.active {

            opacity: 1;

            background: rgba(255,255,255,0.2);

            transform: translateX(10px);

        }

       

        .step.completed {

            opacity: 1;

            background: rgba(76, 175, 80, 0.3);

        }

       

        .current-step {

            background: rgba(255, 255, 255, 0.15);

            border-radius: 15px;

            padding: 25px;

            margin-bottom: 20px;

            border: 2px solid #ffd700;

        }

       

        .completed-steps {

            background: rgba(76, 175, 80, 0.1);

            border-radius: 15px;

            padding: 20px;

            margin-top: 20px;

        }

       

        .completed-steps h4 {

            color: #00ff88;

            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);

            margin-bottom: 15px;

        }

       

        .final-sum {

            background: rgba(255, 215, 0, 0.1);

            border-radius: 15px;

            padding: 25px;

            border: 2px solid #ffd700;

        }

       

        .answer-section {

            text-align: center;

            margin-top: 20px;

        }

       

        .answer-input {

            padding: 15px 25px;

            font-size: 1.5rem;

            border: none;

            border-radius: 25px;

            text-align: center;

            margin: 0 10px;

            width: 150px;

            background: rgba(255,255,255,0.9);

            color: #333;

        }

       

        .submit-btn {

            padding: 15px 30px;

            font-size: 1.2rem;

            border: none;

            border-radius: 25px;

            background: #4CAF50;

            color: white;

            cursor: pointer;

            transition: all 0.3s ease;

            margin-left: 10px;

        }

       

        .submit-btn:hover {

            background: #45a049;

            transform: translateY(-2px);

        }

       

        .score-board {

            display: flex;

            justify-content: center;

            gap: 30px;

            margin-bottom: 20px;

        }

        

        .score-item {

            text-align: center;

            background: rgba(255,255,255,0.1);

            padding: 15px 25px;

            border-radius: 15px;

            backdrop-filter: blur(10px);

        }

       

        .score-number {

            font-size: 2rem;

            font-weight: bold;

            display: block;

        }

       

        .feedback {

            text-align: center;

            font-size: 1.5rem;

            font-weight: bold;

            margin: 20px 0;

            min-height: 40px;

        }

       

        .correct { color: #00ff88; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }

        .incorrect { color: #ff4444; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }

       

        .instructions {

            background: rgba(255,255,255,0.1);

            border-radius: 15px;

            padding: 20px;

            margin-bottom: 30px;

            backdrop-filter: blur(10px);

        }

       

        .instructions h3 {

            color: #ffd700;

            margin-bottom: 15px;

            text-align: center;

        }

       

        .instructions ul {

            list-style: none;

            padding: 0;

        }

       

        .instructions li {

            margin: 10px 0;

            padding: 10px;

            background: rgba(255,255,255,0.05);

            border-radius: 8px;

            border-left: 4px solid #ffd700;

        }

       

        @media (max-width: 768px) {

            .title { font-size: 2rem; }

            .warriors-container { flex-direction: column; }

            .vs-symbol { font-size: 2rem; }

            .warrior { width: 60px; height: 60px; font-size: 1.2rem; }

            .score-board { flex-direction: column; gap: 15px; }

            .game-controls { gap: 10px; }

            .difficulty-btn { padding: 10px 16px; font-size: 0.9rem; }

        }

    </style>

</head>

<body>

    <div class="container">

        <div class="header">

            <h1 class="title">üèÜ Êï∏Â≠óÊà∞Â£´ - ‰πòÊ≥ïÂ§ßÊà∞</h1>

            <p class="subtitle">ËÆìÊï∏Â≠óÊà∞Â£´ÂÄëÊïô‰Ω†‰πòÊ≥ïÁöÑÁßòÂØÜÔºÅÈÅ©ÂêàÂ∞èÂ≠∏ÁîüËàáÂÆ∂Èï∑‰∏ÄËµ∑‰∫íÂãïÂ≠∏Áøí</p>

        </div>

       

        <div class="instructions">

            <h3>üìö ÈÅäÊà≤Ë™™Êòé</h3>

            <ul>

                <li>üéØ <strong>ÁõÆÊ®ôÔºö</strong>ÈÄèÈÅéÊà∞Â£´Â∞çÊà∞ÁöÑÊñπÂºèÔºåÂ≠∏ÁøíÂ§ö‰ΩçÊï∏‰πòÊ≥ïÁöÑÂàÜËß£Ë®àÁÆó</li>

                <li>‚öîÔ∏è <strong>Áé©Ê≥ïÔºö</strong>ÊØèÂÄãÊï∏Â≠óÁöÑ‰ΩçÊï∏ÈÉΩÊòØÊà∞Â£´Ôºå‰ªñÂÄëÊúÉÈÄê‰∏ÄÂ∞çÊà∞‰∏¶Ë®àÁÆóÁµêÊûú</li>

                <li>üßÆ <strong>Â≠∏ÁøíÔºö</strong>Â≠©Â≠êÂ∞áÂ≠∏ÊúÉÂ¶Ç‰ΩïÂ∞áË§áÈõúÁöÑ‰πòÊ≥ïÂàÜËß£ÊàêÁ∞°ÂñÆÁöÑÊ≠•È©ü</li>

                <li>üèÖ <strong>ÈÄ≤Â∫¶Ôºö</strong>ÂæûÁ∞°ÂñÆÁöÑ‰∫å‰ΩçÊï∏√ó‰∏Ä‰ΩçÊï∏ÈñãÂßãÔºåÈÄêÊ≠•ÊåëÊà∞Êõ¥Èõ£ÁöÑÈ°åÁõÆ</li>

                <li>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <strong>Ë¶™Â≠ê‰∫íÂãïÔºö</strong>ÂÆ∂Èï∑ÂèØ‰ª•Èô™‰º¥Â≠©Â≠ê‰∏ÄËµ∑Ëß£È°åÔºåË®éË´ñÊØèÂÄãÊ≠•È©ü</li>

            </ul>

        </div>

       

        <div class="game-controls">

            <button class="difficulty-btn active" onclick="setDifficulty('2x1')">‰∫å‰ΩçÊï∏ √ó ‰∏Ä‰ΩçÊï∏</button>

            <button class="difficulty-btn" onclick="setDifficulty('3x1')">‰∏â‰ΩçÊï∏ √ó ‰∏Ä‰ΩçÊï∏</button>

            <button class="difficulty-btn" onclick="setDifficulty('2x2')">‰∫å‰ΩçÊï∏ √ó ‰∫å‰ΩçÊï∏</button>

            <button class="difficulty-btn" onclick="setDifficulty('3x2')">‰∏â‰ΩçÊï∏ √ó ‰∫å‰ΩçÊï∏</button>

            <button class="difficulty-btn" onclick="setDifficulty('2x3')">‰∫å‰ΩçÊï∏ √ó ‰∏â‰ΩçÊï∏</button>

        </div>

       

        <div class="score-board">

            <div class="score-item">

                <span class="score-number" id="correct-count">0</span>

                <span>Á≠îÂ∞çÈ°åÊï∏</span>

            </div>

            <div class="score-item">

                <span class="score-number" id="total-count">0</span>

                <span>Á∏ΩÈ°åÊï∏</span>

            </div>

            <div class="score-item">

                <span class="score-number" id="accuracy">0%</span>

                <span>Ê≠£Á¢∫Áéá</span>

            </div>

        </div>

       

        <div class="battle-arena">

            <div class="problem-display" id="problem-display">

                ÈªûÊìä„ÄåÈñãÂßãÊà∞È¨•„Äç‰æÜÈñãÂßãÈÅäÊà≤ÔºÅ

            </div>

           

            <div class="warriors-container" id="warriors-container">

                <!-- Êà∞Â£´ÂÄëÊúÉÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->

            </div>

           

            <div class="battle-steps" id="battle-steps">

                <h3 style="margin-bottom: 15px;">‚öîÔ∏è Êà∞È¨•Ê≠•È©üÔºö</h3>

                <div id="steps-container">

                    <!-- Ê≠•È©üÊúÉÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->

                </div>

            </div>

           

            <div class="answer-section">

                <button class="submit-btn" onclick="newProblem()" style="background: #2196F3; font-size: 1.3rem; padding: 20px 40px;">üöÄ ÈñãÂßãÊñ∞Êà∞È¨•</button>

            </div>

           

            <div class="feedback" id="feedback"></div>

        </div>

       

        <div class="instructions" style="margin-top: 30px;">

            <h3>üí° ÂÆ∂Èï∑ÊåáÂ∞éÂª∫Ë≠∞</h3>

            <ul>

                <li>üó£Ô∏è <strong>ÈºìÂãµÊÄùËÄÉÔºö</strong>ËÆìÂ≠©Â≠êË™™Âá∫ÊØè‰∏ÄÊ≠•ÁöÑË®àÁÆóÈÅéÁ®ãÔºåÂüπÈ§äÈÇèËºØÊÄùÁ∂≠</li>

                <li>üéâ <strong>Ê≠£Èù¢ÂõûÈ•ãÔºö</strong>Á≠îÂ∞çÊôÇÁµ¶‰∫àËÆöÁæéÔºåÁ≠îÈåØÊôÇËÄêÂøÉËß£ÈáãÊ≠£Á¢∫ÊñπÊ≥ï</li>

                <li>üìù <strong>Á≠ÜÁÆóÁ∑¥ÁøíÔºö</strong>ÂèØ‰ª•Ê∫ñÂÇôÁ¥ôÁ≠ÜÔºåËÆìÂ≠©Â≠êÂêåÊôÇÁ∑¥ÁøíÁ≠ÜÁÆó</li>

                <li>‚è∞ <strong>ÈÅ©Â∫¶‰ºëÊÅØÔºö</strong>ÊØèÊ¨°ÈÅäÊà≤15-20ÂàÜÈêòÔºåÈÅøÂÖçÁñ≤Âãû</li>

                <li>üéØ <strong>Âæ™Â∫èÊº∏ÈÄ≤Ôºö</strong>ÂæûÁ∞°ÂñÆÈõ£Â∫¶ÈñãÂßãÔºåÈÄêÊ≠•ÊèêÂçáÊåëÊà∞</li>

            </ul>

        </div>

    </div>

 

    <script>

        let currentDifficulty = '2x1';

        let currentProblem = null;

        let currentStep = 0;

        let correctCount = 0;

        let totalCount = 0;

        let selectedWarriors = [];

       

        function setDifficulty(difficulty) {

            currentDifficulty = difficulty;

            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));

            event.target.classList.add('active');

            newProblem();

        }

       

        function generateProblem() {

            let num1, num2;

           

            switch(currentDifficulty) {

                case '2x1':

                    num1 = Math.floor(Math.random() * 90) + 10; // 10-99

                    num2 = Math.floor(Math.random() * 9) + 1;   // 1-9

                    break;

                case '3x1':

                    num1 = Math.floor(Math.random() * 900) + 100; // 100-999

                    num2 = Math.floor(Math.random() * 9) + 1;     // 1-9

                    break;

                case '2x2':

                    num1 = Math.floor(Math.random() * 90) + 10; // 10-99

                    num2 = Math.floor(Math.random() * 90) + 10; // 10-99

                    break;

                case '3x2':

                    num1 = Math.floor(Math.random() * 900) + 100; // 100-999

                    num2 = Math.floor(Math.random() * 90) + 10;   // 10-99

                    break;

                case '2x3':

                    num1 = Math.floor(Math.random() * 90) + 10;   // 10-99

                    num2 = Math.floor(Math.random() * 900) + 100; // 100-999

                    break;

            }

           

            return { num1, num2, answer: num1 * num2 };

        }

       

        function getDigits(num) {

            const str = num.toString();

            const digits = [];

           

            for (let i = str.length - 1; i >= 0; i--) {

                digits.push(parseInt(str[i]));

            }

           

            // Ë£úÈΩäÂà∞‰∏â‰ΩçÊï∏ [ÂÄã‰Ωç, ÂçÅ‰Ωç, Áôæ‰Ωç]

            while (digits.length < 3) {

                digits.push(0);

            }

           

            return digits;

        }

       

        function createWarriors(num1, num2) {

            const digits1 = getDigits(num1);

            const digits2 = getDigits(num2);

           

            const container = document.getElementById('warriors-container');

            container.innerHTML = '';

           

            // Á¨¨‰∏ÄÂÄãÊï∏Â≠óÁöÑÊà∞Â£´

            const group1 = document.createElement('div');

            group1.className = 'warrior-group';

            group1.innerHTML = `<h3>${num1}</h3>`;

           

            const warriorRow1 = document.createElement('div');

            warriorRow1.className = 'warrior-row';

           

            const positions = ['ones', 'tens', 'hundreds'];

            const positionNames = ['ÂÄã‰Ωç', 'ÂçÅ‰Ωç', 'Áôæ‰Ωç'];

           

            for (let i = 2; i >= 0; i--) {

                if (digits1[i] > 0 || (i === 0 && num1 > 0)) {

                    const warrior = document.createElement('div');

                    warrior.className = `warrior ${positions[i]}`;

                    warrior.textContent = digits1[i];

                    warrior.title = `${positionNames[i]}: ${digits1[i]}`;

                    warrior.onclick = () => selectWarrior(warrior, 1, i, digits1[i]);

                    warriorRow1.appendChild(warrior);

                }

            }

           

            group1.appendChild(warriorRow1);

           

            // VS Á¨¶Ëôü

            const vs = document.createElement('div');

            vs.className = 'vs-symbol';

            vs.textContent = '‚öîÔ∏è';

            vs.style.margin = '20px 0';

           

            // Á¨¨‰∫åÂÄãÊï∏Â≠óÁöÑÊà∞Â£´

            const group2 = document.createElement('div');

            group2.className = 'warrior-group';

            group2.innerHTML = `<h3>${num2}</h3>`;

           

            const warriorRow2 = document.createElement('div');

            warriorRow2.className = 'warrior-row';

           

            for (let i = 2; i >= 0; i--) {

                if (digits2[i] > 0 || (i === 0 && num2 > 0)) {

                    const warrior = document.createElement('div');

                    warrior.className = `warrior ${positions[i]}`;

                    warrior.textContent = digits2[i];

                    warrior.title = `${positionNames[i]}: ${digits2[i]}`;

                    warrior.onclick = () => selectWarrior(warrior, 2, i, digits2[i]);

                    warriorRow2.appendChild(warrior);

                }

            }

           

            group2.appendChild(warriorRow2);

           

            container.appendChild(group1);

            container.appendChild(vs);

            container.appendChild(group2);

        }

       

        function selectWarrior(element, group, position, digit) {

            // ÁßªÈô§‰πãÂâçÁöÑÈÅ∏Êìá

            document.querySelectorAll('.warrior').forEach(w => w.classList.remove('selected'));

           

            // ÈÅ∏ÊìáÁï∂ÂâçÊà∞Â£´

            element.classList.add('selected');

            

            // È°ØÁ§∫ÈÄôÂÄãÊà∞Â£´ÁöÑÊà∞È¨•Âäõ

            const positionNames = ['ÂÄã‰Ωç', 'ÂçÅ‰Ωç', 'Áôæ‰Ωç'];

            const feedback = document.getElementById('feedback');

            feedback.innerHTML = `üó°Ô∏è ÈÅ∏‰∏≠‰∫Ü${positionNames[position]}Êà∞Â£´Ôºö${digit}`;

            feedback.className = '';

        }

       

        function createBattleSteps(num1, num2) {

            const digits1 = getDigits(num1);

            const digits2 = getDigits(num2);

            const container = document.getElementById('steps-container');

            container.innerHTML = '';

           

            currentProblem.steps = [];

            const positionNames = ['ÂÄã‰Ωç', 'ÂçÅ‰Ωç', 'Áôæ‰Ωç'];

            const multipliers = [1, 10, 100];

           

            // ÁîüÊàêÊâÄÊúâÊà∞È¨•Ê≠•È©ü

            for (let i = 0; i < 3; i++) {

                if (digits2[i] > 0) {

                    for (let j = 0; j < 3; j++) {

                        if (digits1[j] > 0) {

                            const value1 = digits1[j] * multipliers[j]; // ÂØ¶ÈöõÁöÑ‰ΩçÂÄº

                            const value2 = digits2[i] * multipliers[i]; // ÂØ¶ÈöõÁöÑ‰ΩçÂÄº

                            const result = value1 * value2;

                            currentProblem.steps.push({

                                text: `${positionNames[j]}Êà∞Â£´(${value1}) √ó ${positionNames[i]}Êà∞Â£´(${value2})`,

                                calculation: `${value1} √ó ${value2}`,

                                result: result,

                                value1: value1,

                                value2: value2

                            });

                        }

                    }

                }

            }

           

            // È°ØÁ§∫Á¨¨‰∏ÄÂÄãÊ≠•È©ü

            showCurrentStep();

        }

       

        function showCurrentStep() {

            const container = document.getElementById('steps-container');

           

            if (currentStep >= currentProblem.steps.length) {

                // ÊâÄÊúâÊ≠•È©üÂÆåÊàêÔºåÈ°ØÁ§∫ÊúÄÁµÇÂä†Á∏Ω

                showFinalSum();

                return;

            }

           

            const step = currentProblem.steps[currentStep];

           

            // ÂâµÂª∫Áõ¥ÂºèË®àÁÆóÈ°ØÁ§∫

            const verticalCalculation = createVerticalCalculation(step.value1, step.value2);

           

            container.innerHTML = `

                <div class="current-step">

                    <h3>‚öîÔ∏è Á¨¨ ${currentStep + 1} ÂõûÂêàÊà∞È¨•Ôºö</h3>

                    <div class="step-question">

                        <p style="font-size: 1.3rem; margin: 15px 0;">${step.text}</p>

                        <div class="vertical-calculation">

                            ${verticalCalculation}

                        </div>

                        <div style="margin: 20px 0;">

                            <input type="number" id="step-input" class="answer-input" placeholder="Ëº∏ÂÖ•Á≠îÊ°à" style="width: 200px;">

                            <button onclick="checkStepAnswer()" class="submit-btn" style="background: #ff6b6b;">Á¢∫Ë™ç</button>

                        </div>

                        <div id="step-feedback" class="feedback"></div>

                    </div>

                </div>

                <div class="completed-steps">

                    <h4>‚úÖ Â∑≤ÂÆåÊàêÁöÑÊà∞È¨•Ôºö</h4>

                    ${currentProblem.steps.slice(0, currentStep).map((s, i) =>

                        `<div class="step completed">

                            <span>${s.text}</span>

                            <span style="color: #4CAF50; font-weight: bold;">${s.result}</span>

                        </div>`

                    ).join('')}

                </div>

            `;

           

            // ËÆìËº∏ÂÖ•Ê°ÜÁç≤ÂæóÁÑ¶Èªû

            setTimeout(() => {

                const input = document.getElementById('step-input');

                if (input) input.focus();

            }, 100);

        }

       

        function createVerticalCalculation(num1, num2) {

            const num1Str = num1.toString();

            const num2Str = num2.toString();

            const maxLength = Math.max(num1Str.length, num2Str.length);

           

            return `

                <div style="font-family: 'Courier New', monospace; font-size: 2rem; text-align: center; background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">

                    <div style="text-align: right; padding: 5px 0;">${num1Str.padStart(maxLength + 2)}</div>

                    <div style="text-align: right; padding: 5px 0; border-bottom: 3px solid #ffd700; margin-bottom: 10px;">√ó ${num2Str.padStart(maxLength)}</div>

                    <div style="text-align: right; padding: 5px 0; color: #ffd700;">?</div>

                </div>

            `;

        }

       

        function checkStepAnswer() {

            const userAnswer = parseInt(document.getElementById('step-input').value);

            const feedback = document.getElementById('step-feedback');

            const correctAnswer = currentProblem.steps[currentStep].result;

           

            if (isNaN(userAnswer)) {

                feedback.textContent = 'Ë´ãËº∏ÂÖ•‰∏ÄÂÄãÊï∏Â≠óÔºÅ';

                feedback.className = 'incorrect';

                return;

            }

           

            if (userAnswer === correctAnswer) {

                feedback.textContent = 'üéâ Â§™Ê£í‰∫ÜÔºÅÈÄô‰∏ÄÂõûÂêà‰Ω†Ë¥è‰∫ÜÔºÅ';

                feedback.className = 'correct';

               

                // 1.5ÁßíÂæåÈÄ≤ÂÖ•‰∏ã‰∏ÄÊ≠•

                setTimeout(() => {

                    currentStep++;

                    showCurrentStep();

                }, 1500);

            } else {

                feedback.textContent = `‚ùå ‰∏çÂ∞çÂì¶ÔºÅÊ≠£Á¢∫Á≠îÊ°àÊòØ ${correctAnswer}„ÄÇÂÜçË©¶‰∏ÄÊ¨°ÔºÅ`;

                feedback.className = 'incorrect';

            }

        }

       

        function showFinalSum() {

            const container = document.getElementById('steps-container');

            const totalSum = currentProblem.steps.reduce((sum, step) => sum + step.result, 0);

           

            container.innerHTML = `

                <div class="final-sum">

                    <h3>üèÜ ÊúÄÁµÇÊ±∫Êà∞ - Âä†Á∏ΩÊâÄÊúâÊà∞ÊûúÔºö</h3>

                    <div class="completed-steps">

                        ${currentProblem.steps.map((s, i) =>

                            `<div class="step completed">

                                <span>${s.text}</span>

                                <span style="color: #4CAF50; font-weight: bold;">${s.result}</span>

                            </div>`

                        ).join('')}

                    </div>

                    <div style="border-top: 2px solid #ffd700; margin: 20px 0; padding-top: 20px;">

                        <p style="font-size: 1.3rem; margin: 15px 0;">

                            Â∞áÊâÄÊúâÊà∞ÊûúÂä†Ëµ∑‰æÜÔºö${currentProblem.steps.map(s => s.result).join(' + ')} = ?

                        </p>

                        <div style="margin: 20px 0;">

                            <input type="number" id="final-input" class="answer-input" placeholder="Ëº∏ÂÖ•ÊúÄÁµÇÁ≠îÊ°à" style="width: 200px;">

                            <button onclick="checkFinalAnswer()" class="submit-btn" style="background: #4CAF50;">ÂÆåÊàêÊà∞È¨•</button>

                        </div>

                        <div id="final-feedback" class="feedback"></div>

                    </div>

                </div>

            `;

           

            setTimeout(() => {

                const input = document.getElementById('final-input');

                if (input) input.focus();

            }, 100);

        }

       

        function checkFinalAnswer() {

            const userAnswer = parseInt(document.getElementById('final-input').value);

            const feedback = document.getElementById('final-feedback');

           

            if (isNaN(userAnswer)) {

                feedback.textContent = 'Ë´ãËº∏ÂÖ•‰∏ÄÂÄãÊï∏Â≠óÔºÅ';

                feedback.className = 'incorrect';

                return;

            }

           

            totalCount++;

           

            if (userAnswer === currentProblem.answer) {

                correctCount++;

                feedback.textContent = 'üéâüéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÂÆåÂÖ®ÊéåÊè°‰∫ÜÈÄôÈÅì‰πòÊ≥ïÈ°åÔºÅÊà∞Â£´ÂÄëÁÇ∫‰Ω†Ê≠°ÂëºÔºÅ';

                feedback.className = 'correct';

            } else {

                feedback.textContent = `‚ùå ÊúÄÁµÇÁ≠îÊ°à‰∏çÂ∞çÂì¶ÔºÅÊ≠£Á¢∫Á≠îÊ°àÊòØ ${currentProblem.answer}„ÄÇ‰∏çÈÅé‰Ω†Â∑≤Á∂ìÂæàÊ£í‰∫ÜÔºÅ`;

                feedback.className = 'incorrect';

            }

           

            updateScoreBoard();

           

            // 3ÁßíÂæåËá™ÂãïÈñãÂßãÊñ∞È°åÁõÆ

            setTimeout(() => {

                newProblem();

            }, 3000);

        }

       

        function newProblem() {

            currentProblem = generateProblem();

            currentStep = 0;

            selectedWarriors = [];

           

            document.getElementById('problem-display').textContent =

                `${currentProblem.num1} √ó ${currentProblem.num2} = ?`;

           

            createWarriors(currentProblem.num1, currentProblem.num2);

            createBattleSteps(currentProblem.num1, currentProblem.num2);

           

            document.getElementById('feedback').textContent = 'Êà∞È¨•ÈñãÂßãÔºÅË´ãÈÄêÊ≠•ÂÆåÊàêÊØèÂÄãÊà∞Â£´ÁöÑÂ∞çÊà∞ÔºÅ';

            document.getElementById('feedback').className = '';

        }

       

        function updateScoreBoard() {

            document.getElementById('correct-count').textContent = correctCount;

            document.getElementById('total-count').textContent = totalCount;

            document.getElementById('accuracy').textContent =

                totalCount > 0 ? Math.round((correctCount / totalCount) * 100) + '%' : '0%';

        }

       

        // ÂÖÅË®±Êåâ Enter ÈçµÊèê‰∫§Á≠îÊ°à

        document.addEventListener('keypress', function(e) {

            if (e.key === 'Enter') {

                const stepInput = document.getElementById('step-input');

                const finalInput = document.getElementById('final-input');

               

                if (stepInput && stepInput === document.activeElement) {

                    checkStepAnswer();

                } else if (finalInput && finalInput === document.activeElement) {

                    checkFinalAnswer();

                }

            }

        });

       

        // ÂàùÂßãÂåñÈÅäÊà≤

        newProblem();

    </script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e48cde83edf244',t:'MTc1NzczNDA2Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>

</html>
